### 背景
原有的项目模型是『生产者生产消息，消息发送到channel，channel读取出来的数据轮询逐个发送给消费者（比如两个消费者按照奇偶发送）』，这样的问题是一旦某个消费者由于处理数据阻塞，这样也无法将消息发送给下一个。
修改后的模型是『生产者生产消息，消息发送给channel，多个消费者以先获得先消费的原则从一个channel获取消息』，性能瓶颈在生产。
### 分析
#### 中介者模式
生产者消息发放给指定对象这种行为，是**生产者主动push消息，属于中介者模式**。虽然有多个生产者，但通过统一从channel获取再指定分发。这样划分生产、中介、消费三个模块，性能瓶颈在中介者分发给消费者过程，一旦某个消费者卡住，就无法分发后续消息。
#### 观察者模式
多消费者主动从channel获取这种行为，是**消费者主动pull消息，属于观察者模式**。任意一个消费者空闲，就会主动拉取消息，这样即使某一个消费者在忙，也不影响其余消费者消费，消息以先获取先得的方式被消费者获取。这种模型的性能瓶颈在生产者（被观察者）的生产能力。
[推模式和拉模式](https://blog.51cto.com/u_15095774/5342511)
[中介者模式](https://refactoringguru.cn/design-patterns/mediator)